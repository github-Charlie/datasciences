<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<meta name="description" content="MyWorld of programming from data to solution">
		<meta name="keywords" content="web design, html, css, javascript, python, R, SQL, big data, hadoop, spark, data sciences, data science, data analysis, data mining, machine learning, deep learning, artificial intelligence, al">
		<meta name="author" content="C.H.">
		<meta name="copyright" content="&copy; 2018 data sciences">
		<meta name="date" content="2018-01-10" scheme="YYYY-MM-DD">
		<title>Data Sciences|SQL</title>
		<link rel="stylesheet" href="./css/style.css">
		<link rel="shortcut icon" type="image/x-icon" href="img/mlp7.jpg" />

		<!-- Global site tag (gtag.js) - Google Analytics -->
		<script async src="https://www.googletagmanager.com/gtag/js?id=UA-116330579-1"></script>
		<script>
 		window.dataLayer = window.dataLayer || [];
  		function gtag(){dataLayer.push(arguments);}
 		gtag('js', new Date());
		gtag('config', 'UA-116330579-1');
		</script>
 </head>
 <body>
		<header>
			<div class="container">
				<div id="branding">
					<a href="index.html">
					<svg width="230" height="70">
					   <circle cx="32" cy="10" r="10" fill="#ff00d9"/>
					   <circle cx="10" cy="32" r="10" fill="#00FF00"/>
					   <circle cx="32" cy="32" r="10" fill="#00FFFF"/>
					   <circle cx="54" cy="32" r="10" fill="#ffff00"/>
					   <circle cx="32" cy="54" r="10" fill="#ff0000"/>
					   <text x="70" y="40" font-size="20px" font-weight="bold" fill="#00FF00">CHUNLIN HE</text>
					</svg>
					</a>
					<!-- <h1><span class="highlight"><a class="branding" href="index.html">DATA SCIENCES
					</a></span>
					</h1> -->
				</div>

				<nav class="navbar">
					<span class="open-slide">
						<a href="#" onclick="openSlideMenu()">
							<svg width="30" height="30">
								<path d="M0,5,30,5" stroke="#fff"
								stroke-width="5"/>
								<path d="M0,14,30,14" stroke="#fff"
								stroke-width="5"/>
								<path d="M0,23,30,23" stroke="#fff"
								stroke-width="5"/>
							</svg>
						</a>
					</span>
					<ul class="navbar-nav">
						<li><a href="index.html">Home</a></li>
						<li><a href="python.html">Python</a></li>
						<li><a href="r.html">R</a></li>
						<li class="current"><a href="sql.html">SQL</a></li>
						<li><a href="javascript.html">JavaScript</a></li>
						<li><a href="bigdata.html">Bigdata</a></li>
						<li><a href="about.html">About</a></li>
					</ul>
				</nav>

				<div id="side-menu" class="side-nav">
					<a href="#" index.html="btn-close" onclick="closeSlideMenu()" align="right">Close &times;</a>
					<a href="index.html">Home</a>
					<a href="python.html">Python</a>
					<a href="r.html">R</a>
					<a href="sql.html">SQL</a>
					<a href="javascript.html">JavaScript</a>
					<a href="bigdata.html">Bigdata</a>
					<a href="about.html">About</a>
				</div>

				<script>
					function openSlideMenu(){
						document.getElementById('side-menu').style.width
						='150px';
						document.getElementById('main').style.marginLeft
						='250px';
					}

					function closeSlideMenu(){
						document.getElementById('side-menu').style.width
						='0';
						document.getElementById('main').style.marginLeft
						='0';
					}
				</script>
			</div>
		</header>

		<section id="main">
			<div class="container">
				<aside id="sidebar">
					<br style ="line-height:4;">
					<div class="navy">
						<img src="simg/simg1.jpg" alt="s-icon" height="50%" width="100%" align="right">
						<br>
						<h3 align="center">Why SQL?</h3>
						<p>SQL has become the most commonly used database language.  As a domain-specific language, SQL is designed to manage data in a relational database management system, or to stream process data from a relational data stream management system. In addition, since the unstructured big data are now on the rise, RDBMS will be inadequate for the analysis of big data. For instance, the use of SQL and MapReduce for big data analytics and Spark SQL for querying structured data in the Spark programs is becoming more and more frequent.</p>
					</div>
				</aside>
				<article id="main-col">
					<br>
					<h1 class="page-title" id="sqlprogramming">SQL Programming</h1>
					<h3>SQL introduction</h3>
					<p>
					SQL (Structured Query Language) is a database computer language created for managing data in Relational Database Management Systems (RDBMS). It was originally developed at IBM by Donald D. Chamberlin and Raymond F. Boyce in the early 1970s, initially called SEQUEL, in order to manipulate and retrieve data stored in IBM's original relational database management system.
					</p>

					<p>
					The SQL language is used to operate databases including database creation, data query, update, schema creation and modification as well as data access control. It is an ANSI (American National Standards Institute) standard language with different versions for Relational Database System. The RDBMS (such as MySQL, MS SQL Server, IBM DB2, Sybase, PostgreSQL, SQLite, Oracle, MS Access) use SQL as their standard database language.
					</p>

					<h3>Basic SQL statements</h3>
					<pre><code>
					SELECT c1,c2,...;  --SELECT some fields FROM table1 WHERE (a clause to filter records)...
					FROM table1;
					WHERE condition;
					GROUP by column-name;
					ORDER by column-name;

					SELECT * FROM table1;  --SELECT all fields FROM table1...

					SELECT column_name(s) FROM table1
					INNER JOIN table2 ON table1.column_name = table2.column_name;  --select records with matching values in both tables.
					LEFT JOIN table2 ON table1.column_name = table2.column_name;
					--generate all records from the left table (table1) & the matched records from the right table (table2).
					RIGHT JOIN table2 ON table1.column_name = table2.column_name;
					--generate all records from the right table (table2) & the matched records from the left table (table1).
					FULL OUTER JOIN table2 ON table1.column_name = table2.column_name;
					--generate all records if there is a match in either left (table1) or right (table2) table records.

					SELECT column_name(s) FROM table1 T1, table1 T2  --The table is joined with itself.
					WHERE condition;
					</code></pre>

					<h3>SQL vs NoSQL</h3>
					<p>
					The database technology has two main types of databases including SQL (structured query language) and NoSQL (“non SQL" or “Not only SQL"), which refer to relational databases and non-relational databases, respectively. Unlike SQL, NoSQL databases are document-oriented instead of tables. Thus, the unstructured data (such as articles, photos, videos, and web content etc.) are stored in a single document that is different from SQL databases (<a href="https://amzn.to/2Gmzsqh" target="_blank">SQL & NoSQL Databases, 2019</a>).
					</p>
					<p>
					NoSQL databases have an advantage of ease of access by the app developers while relational databases are not easily accessible to the applications developed using the object-oriented programming languages such as Python and PHP (Hypertext Preprocessor).
					</p>

					<h3>The most popular databases</h3>
					<ul>

					<p>
					<li><strong>Microsoft SQL Server:</strong>
						This database management engine can work on both cloud-based servers and local servers. It is stable and fast. However, the cost may be high for many organizations.
					</li></p>

					<p>
					<li><strong>PostgreSQL:</strong>
						PostgreSQL is a free popular database and is often used for web databases.  It is one of the first database management systems and can be used for managing both structured and unstructured data. It can support JSON, is scalable and is able to handle terabytes of data. PostgreSQL is a free popular database and is often used for web databases.  It is one of the first database management systems and can be used for managing both structured and unstructured data. It can support JSON, is scalable and is able to handle terabytes of data.
					</li></p>

					<p>
					<li><strong>MySQL:</strong>
						MySQL is also one of the most popular databases for web-based applications.  It is a freeware but there are also different paid editions available for commercial use.
					</li></p>

					<p>
					<li><strong>Oracle Database:</strong>
						Oracle database management tool is no doubt robust, it can be used for the cloud and be hosted on a single or multiple servers.  It is enabled to manage databases with billions of records. However, the cost of Oracle may be prohibitive for small companies.
					</li></p>

					<p>
					<li><strong>MongoDB:</strong>
						MongoDB is also a free database but has a commercial version.  It is designed for managing both structured and unstructured data. MongoDB is easy to use and runs fast, it can support JSON and other NoSQL documents. However, SQL can not used as a query language but tools are available for translating SQL to MongoDB queries.
					</li></p>

					<p>
					<li><strong>MariaDB:</strong>
						MariaDB database management system has a free and a paid versions. There are a variety of plugins available for it, and it is the fastest growing open source database.
					</li></p>
					</ul>

					<h3>The most popular web services for cloud databases</h3>
					<ul>

					<p>
					<li><strong>Amazon Web Service (AWS): </strong>
						The services from Amazon include: (1) <strong>Amazon RDS:</strong> this service provides the database products for Microsoft SQL Server, MySQL, PostgreSQL, Oracle, MariaDB, etc. (2) <strong>Amazon SimpleDB:</strong> it is a NoSQL data store. (3) <strong>Amazon DynamoDB:</strong> it is a key-value and document database capable of delivering single-digit millisecond performance at any scale.
 					</li></p>
					<p>
					<li><strong>Microsoft Azure:</strong>
						MS Azure is a cloud platform across 55 regions that build and run web-based applications, smart client applications, and XML web services.
 					</li></p>

					<p>
					<li><strong>Google Cloud Platform: </strong>
						Google Cloud Platform (GCP) is a suite of cloud computing services that Google uses for Search, Gmail, YouTube and many other modular cloud services such as computing, data storage, data analytics and machine learning.
 					</li></p>
					Other cloud databases with enterprise-scale database technology include <strong>MongoDB Atlas</strong>, <strong>Oracle Database</strong> and <strong>IBM DB2</strong>.
 					</ul>

				</article>
			</div>

			<div class="container">
				<article id="main-col">
					<hr><br>
					<h1>SQL Applications</h1>
					<h3 id="databases">Creating and managing databases</h3>
					<pre><code>
					CREATE TABLE geneList(
					    id INT NOT NULL AUTO_INCREMENT,
					    geneName VARCHAR(255),
					    species VARCHAR(255),
					    trait VARCHAR(255),
					    geneSeq VARCHAR(255),
					    description VARCHAR(255),
					    fPrimer VARCHAR(255),
					    rPrimer VARCHAR(255),
					    ampliconSize VARCHAR(255),
					    PRIMARY KEY(id)
					);
					--Insert data
					INSERT INTO genelist(geneName, species, trait, geneSeq, description, fPrimer, rPrimer, ampliconSize) VALUES
					('G1.01gxxxxxx','species1','YIELD','TGGTAACTCG....ACTGATCGGC','DESCRIPTION1','ATAGATTATTTAGAGCCAGC','GCTGGCGTCCACGCATTTAC','118'),
					--more data
					('G8.06gxxxxxx','species1','YIELD','CGGACCAGCG....CCAGTGATCC','DESCRIPTION8','GCTTAGATAGCGAGCGACCG','AGGTGTGCGACCGCAGTGCA','113');
					</code></pre>

					<p>The top rows of the gene table (<i>genelist</i>) were exported from the database created using SQL scripts mentioned above:<br>
					<img src="simg/simg2_genelist.jpg" alt="genelist" align="middle" width="100%">
					</p>
					<p>This table can be easily accessed/queried using SQL statements such as "SELECT * FROM genelist, WHERE condition(id=...)", etc.:
					<pre><code>
					SELECT
					    *
					FROM
					    genelist
					WHERE
					    geneName like '%8g%';   -- select all the genes on linkage group 8
					    trait like '%disease%'  -- select all the disease resistance genes
					</code></pre>
					<p>Or, it can be updated using the following SQL statements such as:
						<ul>
							<li>UPDATE genelist, SET column1=..., column2=..., WHERE id=...;</li>
							<li>DELETE FROM genelist, WHERE id=...;</li>
							<li>INSERT INTO genelist (column1, column2, ...), VALUES (VALUE1, VALUE2, VALUE3, ...);</li>
							<li>ALTER TABLE genelist, ADD column_name datatype;</li>
						</ul>
					</p><br>

					<h3 id="databases">Basic SQL Applications</h3>
						<ul>
							<li>To select only the DISTINCT values from <i>State</i> column in the <i>Customers</i> table.</li>
								<pre><code>
									SELECT DISTINCT State
									FROM Customers
									ORDER BY State ASC;
								</code></pre><br>
							<li>To get the total number of different (distinct) States.</li>
								<pre><code>
									SELECT COUNT(DISTINCT State)
									FROM Customers;
								</code></pre><br>
							<li>Use <i>WHERE</i> to filter data.</li>
								<pre><code>
									SELECT *
									FROM Customers
									-- WHERE city in(‘DC’, ‘New York’);
									-- WHERE city='DC' OR city=' New York';
									-- WHERE NOT city='DC' AND NOT city=' New York';
									-- WHERE city LIKE 'd%';
									WHERE city NOT LIKE 'd%';
								</code></pre><br>
							<li>Use <i>UPDATE</i> to update records.</li>
								<pre><code>
									UPDATE Customers
									SET ContactName = 'Tom H.', City= 'Dallas'
									WHERE CustomerID = 10;
								</code></pre><br>
							<li>Use <i>DELETE</i> to delete records from table.</li>
								<pre><code>
									DELETE FROM Customers
									WHERE CustomerName='M.G.';
								</code></pre><br>
							<li>To select rows using <i>TOP</i> and <i>ORDER</i>.</li>
								<pre><code>
									SELECT top 3 State
									FROM Customers
									-- ORDER BY State asc;
									-- ORDER BY State, CustomerName;
									ORDER BY State ASC, CustomerName DESC;
								</code></pre><br>
							<li>To query records using <i>TOP</i>, <i>LIMIT</i> and <i>ROWNUM</i> on different systems.</li>
								<pre><code>
									-- SQL Server:
									SELECT TOP 10 *
									--SELECT TOP 50 PERCENT *
									FROM Customer
									WHERE City='DC';

									-- MySQL:
									SELECT *
									FROM Customers
									WHERE City='DC'
									LIMIT 10;

									-- Oracle:
									SELECT * FROM Customers
									-- WHERE ROWNUM <= 10;
									WHERE City='DC' AND ROWNUM <= 10;
								</code></pre><br>
							<li>Use Aggregate Functions for simple statistics: <i>count, min, max, avg, sum, stdev, var.</i></li>
								<pre><code>
									SELECT staff_id AS staff, customer_id as customer, sum(amount) OVER (ORDER BY staff_id, customer_id) as total
									FROM sales
									WHERE staff_id=2 AND amount BETWEEN 200 AND 300
									ORDER BY customer_id;
								</code></pre><br>
							<li>USE <i>INNER JOIN</i> of two tables to get sales with employee or customer information.</li>
								<pre><code>
									SELECT s.name, p.payment sales
									FROM dbo.staff$ s
									INNER JOIN dbo.payment$ p
									ON s.staff_id=p.staff_id
									ORDER BY name;
								</code></pre><br>
							<li>To JOIN Three Tables.</li>
								<pre><code>
									SELECT o.OrderID, c.CustomerName, s.ShipperName
									FROM ((Orders o
									INNER JOIN Customers c ON o.CustomerID = c.CustomerID)
									INNER JOIN Shippers s ON o.ShipperID = s.ShipperID);
								</code></pre><br>

							<li><i>LEFT JOIN</i> two tables: it returns all records from the left table (the 1st) and the matched records from the right table (the 2nd).</li>
								<pre><code>
									SELECT p.customer_id, s.employee_name, p.payment
									FROM dbo.payment$ p
									LEFT JOIN dbo.staff$ s
									ON p.employee_id= s.employee_id
									order by employee_name;
								</code></pre><br>

							<li><i>RIGHT JOIN</i> two tables: it returns all records from the right table (the 2nd) and the matched records from the left table (the 1st).</li>
								<pre><code>
									SELECT p.customer_id, s.employee_name, p.payment
									FROM dbo.payment$ p
									RIGHT JOIN dbo.staff$ s
									ON p.employee_id= s.employee_id
									order by employee_name;
								</code></pre><br>

							<li><i>FULL OUTER JOIN</i> or <i>FULL JOIN</i> two tables:  it returns all records when there is a match in left (the 1st) or right (the 2nd) table.</li>
								<pre><code>
									SELECT p.customer_id, s.employee_name, p.payment
									FROM dbo.payment$ p
									FULL OUTER JOIN dbo.staff$ s
									ON p.employee_id= s.employee_id
									order by employee_name;
								</code></pre><br>

							<li>SQL Self JOIN: a table is joined with itself. The SQL statement below returns the matched customers from the same city through self-joining based on different customer IDs (“<>” is “not equal to”).</li>
								<pre><code>
									SELECT a.CustomerName AS Name1, b.CustomerName AS Name2, a.City
									FROM Customers a, Customers b
									WHERE a.CustomerID <> b.CustomerID
									AND a.City = b.City
									ORDER BY a.City;
								</code></pre><br>

							<li>Group By vs PARTITION BY functions: I. using Group by</li>
								<pre><code>

								</code></pre><br>

							<li>Group By vs PARTITION BY functions: I. using Group by<br></li>
								In GROUP BY clause, we are able to use a column in the select statement with other aggregation functions if the column name is also used in Group by clause, but other columns are not allowed in the select clause if they are not part of GROUP BY clause.
								<pre><code>

								</code></pre>

						</ul>
				</article>
			</div>
		</section>
		<br>

		<footer>
			<p>Data Science, Copyright &copy; 2020
			<a href="https://twitter.com/ChunlinHe" target="_blank"><img src="img/tweet_icon.png" width="31" height="31" alt="" /></a>
			<a href="https://www.linkedin.com/in/chunlinhe888" target="_blank"><img src="img/in_icon.png" width="31" height="31" alt="" /></a>
			</p>
			<p id="time"></p>
			<script>
			document.getElementById("time").innerHTML = Date();
			</script>
		</footer>

</body>

</html>
